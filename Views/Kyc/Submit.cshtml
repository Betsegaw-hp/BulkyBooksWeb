@model BulkyBooksWeb.Models.ViewModels.KycSubmissionViewModel
@{
    ViewData["Title"] = "KYC Submission";
}
<h2>KYC Submission</h2>
@if (TempData["Message"] != null)
{
    <div class="alert alert-success">@TempData["Message"]</div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}
<div>
    <strong>Status:</strong> <span class="badge badge-info">@Model.KycStatus</span>
    @if (!string.IsNullOrEmpty(Model.KycAdminNotes))
    {
        <div class="alert alert-warning" style="margin-top:10px;">
            <strong>Admin Notes:</strong> @Model.KycAdminNotes
        </div>
    }
</div>
@if (Model.KycStatus == BulkyBooksWeb.Models.KycStatus.Rejected || Model.KycStatus == BulkyBooksWeb.Models.KycStatus.Pending)
{
    <form asp-action="Submit" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label>ID Proof</label>
            @if (!string.IsNullOrEmpty(Model.ExistingIdProofPath))
            {
                var fileName = System.IO.Path.GetFileName(Model.ExistingIdProofPath);
                <a href="@Url.Action("KycDoc", "File", new { fileName = fileName, type = "idproofs", inline = true })" target="_blank">View Existing</a>
            }
            <input type="file" name="IdProof" class="form-control" />
        </div>
        <div class="form-group">
            <label>Address Proof</label>
            @if (!string.IsNullOrEmpty(Model.ExistingAddressProofPath))
            {
                var fileName = System.IO.Path.GetFileName(Model.ExistingAddressProofPath);
                <a href="@Url.Action("KycDoc", "File", new { fileName = fileName, type = "addressproofs", inline = true })" target="_blank">View Existing</a>
            }
            <input type="file" name="AddressProof" class="form-control" />
        </div>
        <div class="form-group">
            <label>Author Photo</label>
            @if (!string.IsNullOrEmpty(Model.ExistingAuthorPhotoPath))
            {
                var fileName = System.IO.Path.GetFileName(Model.ExistingAuthorPhotoPath);
                <a href="@Url.Action("KycDoc", "File", new { fileName = fileName, type = "authorphotos", inline = true })" target="_blank">View Existing</a>
            }
            <input type="file" name="AuthorPhoto" class="form-control" />
        </div>
        <button type="submit" class="btn btn-primary">Submit KYC</button>
    </form>
}
else if (Model.KycStatus == BulkyBooksWeb.Models.KycStatus.Verified)
{
    <div class="alert alert-success" style="margin-top:10px;">
        Your KYC is verified. You can now upload books.
    </div>
}
